<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>移动web适配利器-rem</title>

	<link rel="shortcut icon" href="/styles/images/favicon.png">
	<link rel="icon" href="/styles/images/favicon.png">

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/styles/css/syntax.css">
	<link rel="stylesheet" href="/styles/css/main.css">
	<link rel="canonical" href="/2016/08/02/mobile-end/">
	<link rel="alternate" type="application/rss+xml" title="Helene's blog" href="/feed.xml">
	
	<meta name="keywords" content="移动web适配利器-rem, Helene's blog, 厚积薄发">
	<meta name="description" content="厚积薄发">

	<script src="/styles/js/jquery.min.js"></script>
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
  	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>
  <body class="index">
    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <span>
          <img src="./../styles/images/logo.png" class="logo">
        </span>
      </a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">    
        <li>
          <a href="/">首页</a>
        </li>
        <li>
          <a href="/greens/">生活</a>
        </li>
        <li>
          <a href="/rice">工作</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <!--<li>
            <a><span id="busuanzi_container_site_pv">客流量<span id="busuanzi_value_site_pv"></span>次</span></a>
        </li>-->
        <li>
          <a href="/reference">外域链接</a>
        </li>
        <li>
          <a href="/donate/">打赏我</a>
        </li>
        <li>
          <a href="http://resume.thisisme1228.com/index.html">我的简历</a>
        </li>
        <!--<li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于我<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a rel="nofollow" target="_blank" href="https://github.com/Thisisme1228">Github</a></li>
            <li><a rel="nofollow" target="_blank" href="">关于作者</a></li>
            <li><a rel="nofollow" href="/books">我的书单</a></li>
            <li><a rel="nofollow" href="http://www.hifreud.com/domains/">域名管理</a></li>
            <li><a rel="nofollow" href="/reference">推荐博客</a></li>
            <li><a href="/feed.xml">RSS订阅</a></li>
            <li class="divider"></li>
            <li><a rel="nofollow" target="_blank" href="https://github.com/luoyan35714/LessOrMore.git">本项目</a></li>
          </ul>
        </li>-->
      </ul>
    </nav>
  </div>
</header>
    <div class="docs-header" id="content">
  <div class="container">
  	
		    <!--<h1>移动web适配利器-rem</h1>-->
		    <!--<p>Post on Aug 02, 2016 by <a href="/about">Helene</a></p>-->
		    <h1 class="margin-top-45">Better me</h1>
    
      <audio  class="hidden" controls  loop="loop"  id="h5audio_media"  preload="auto" height="0" width="0" src="/styles/music/I-will-love-you.mp3">
          <source src="/styles/music/I-will-love-you.mp3">
      </audio>
      <div class="audio-img" id="radio">
          <img  src="/styles/images/header/radio.png">
          <!--<span style="color: beige" id="clickMe">Click!</span>-->
      </div>
  </div>
</div>

    
      
<div class="banner">
  <div class="container">
  	
    	<a href="/greens/#-ref"></a>	/
    	<a href="/rice/#移动端-ref">移动端</a>
    
  </div>
</div>

    
    <!-- 内页-->
<div class="container docs-container">
  <div class="row">
  <div class="col-md-3">
    <div class="sidebar hidden-print" role="complementary">
      <!-- 供内页使用 -->
<div id="navigation">
  <h1>目录</h1>
  <ul class="nav sidenav btn-primary">
  </ul>
</div>




    </div>
  </div>
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">移动web适配利器-rem</h1>
                <span class="post-meta">Date：Aug 2, 2016</span>
                <span class="meta">Author：<a target="_blank" href="http://localhost:4000">Helene</a></span>
              <br />
              <blockquote><p>本文章采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh"> 知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议 </a>进行许可。转载请注明来自<a href="http://life.thisisme1228.com/">Helene的博客</a></p></blockquote>
            </header>
            <article class="post-content">
              <ul id="markdown-toc">
  <li><a href="#rem设置字体大小" id="markdown-toc-rem设置字体大小">rem设置字体大小</a></li>
  <li><a href="#rem进行屏幕适配" id="markdown-toc-rem进行屏幕适配">rem进行屏幕适配</a></li>
  <li><a href="#rem数值计算" id="markdown-toc-rem数值计算">rem数值计算</a></li>
  <li><a href="#rem基准值计算" id="markdown-toc-rem基准值计算">rem基准值计算</a></li>
</ul>
<p>提到rem，大家首先会想到的是em，px，pt这类的词语，大多数人眼中这些单位是用于设置字体的大小的，没错这的确是用来设置字体大小的，但是对于rem来说它可以用来做移动端的响应式适配哦。
<!-- more --></p>

<p>兼容性</p>

<p><img src="/styles/images/mobile/01.jpg" alt="" width="100%" /></p>

<p>先看看兼容性，关于移动端</p>

<p>ios：6.1系统以上都支持</p>

<p>android：2.1系统以上都支持</p>

<p>大部分主流浏览器都支持，可以安心的往下看了。</p>

<hr />

<h3 id="rem设置字体大小">rem设置字体大小</h3>

<p>rem是（font size of the root element）</p>

<p>意思就是根据网页的根元素来设置字体大小，和em（font size of the element）的区别是，em是根据其父元素的字体大小来设置，而rem是根据网页的跟元素（html）来设置字体大小的，举一个简单的例子，</p>

<p>现在大部分浏览器IE9+，Firefox、Chrome、Safari、Opera ，如果我们不修改相关的字体配置，都是默认显示font-size是16px即</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>html {
    font-size:16px;
}
</code></pre></div></div>

<p>那么如果我们想给一个P标签设置12px的字体大小那么用rem来写就是</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>p {
    font-size: 0.75rem; //12÷16=0.75（rem）
}
</code></pre></div></div>

<p>基本上使用rem这个单位来设置字体大小基本上是这个套路，好处是假如用户自己修改了浏览器的默认字体大小，那么使用rem时就可以根据用户的调整的大小来显示了。 但是rem不仅可以适用于字体，同样可以用于width height margin这些样式的单位。下面来具体说一下</p>

<hr />

<h3 id="rem进行屏幕适配">rem进行屏幕适配</h3>

<p>在讲rem屏幕适配之前，先说一下一般做移动端适配的方法，一般可以分为：</p>

<p>1 简单一点的页面，一般高度直接设置成固定值，宽度一般撑满整个屏幕。</p>

<p>2 稍复杂一些的是利用百分比设置元素的大小来进行适配，或者利用flex等css去设置一些需要定制的宽度。</p>

<p>3 再复杂一些的响应式页面，需要利用css3的media query属性来进行适配，大致思路是根据屏幕不同大小，来设置对应的css样式。</p>

<p>上面的一些方法，其实也可以解决屏幕适配等问题，但是既然出来的rem这个新东西，也一定能兼顾到这些方面，下面具体使用rem：</p>

<p>rem适配</p>

<p>先看一个简单的例子：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
.con {
      width: 10rem;
      height: 10rem;
      background-color: red;
}
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"con"</span><span class="nt">&gt;</span>
         
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>在浏览器里面width和height分别是160px，正好是16px * 10,那么如果将html根元素的默认font-size修改一下呢？</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
html {
    font-size: 17px;
}
.con {
      width: 10rem;
      height: 10rem;
      background-color: red;
 }
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"con"</span><span class="nt">&gt;</span>
         
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>这时width和height都是170px，这就说明了将rem应用与width和height时，同样适用rem的特性，根据根元素的font-size值来改变自身的值，由此我们应该可以联想到我们可以给html设定不同的值，从而达到我们css样式中的适配效果。</p>

<hr />

<h3 id="rem数值计算">rem数值计算</h3>

<p>如果利用rem来设置css的值，一般要通过一层计算才行，比如如果要设置一个长宽为100px的div，那么就需要计算出100px对应的rem值是 100 / 16 =6.25rem，这在我们写css中，其实算比较繁琐的一步操作了。</p>

<p>对于没有使用sass的工程：</p>

<p>为了方便起见，可以将html的font-size设置成100px，这样在写单位时，直接将数值除以100在加上rem的单位就可以了。</p>

<p>对于使用sass的工程：</p>

<p>前端构建中，完全可以利用scss来解决这个问题，例如我们可以写一个scss的function px2rem即：</p>

<div class="language-sass highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@function</span> <span class="nf">px2rem</span><span class="p">(</span><span class="nv">$px</span><span class="p">)</span><span class="err">{</span>
    <span class="nv">$rem</span> <span class="p">:</span> <span class="m">37</span><span class="mi">.5px</span><span class="err">;</span>
    <span class="k">@return</span> <span class="p">(</span><span class="nv">$px</span><span class="o">/</span><span class="nv">$rem</span><span class="p">)</span> <span class="o">+</span> <span class="n">rem</span><span class="err">;</span>
<span class="err">}</span>
</code></pre></div></div>

<p>这样，当我们写具体数值的时候就可以写成：</p>

<div class="language-sass highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">height</span><span class="p">:</span> <span class="nf">px2rem</span><span class="p">(</span><span class="m">90px</span><span class="p">)</span><span class="err">;</span>
<span class="nl">width</span><span class="p">:</span> <span class="nf">px2rem</span><span class="p">(</span><span class="m">90px</span><span class="p">)</span><span class="err">;</span>
</code></pre></div></div>

<p>看到这里，你可能会发现一些不理解的地方，就是上面那个rem:37.5px是怎么来的，正常情况下不是默认的16px么，这个其实就是页面的基准值，和html的font-size有关。</p>

<hr />

<h3 id="rem基准值计算">rem基准值计算</h3>

<p>关于rem的基准值，也就是上面那个37.5px其实是根据我们所拿到的视觉稿来决定的，主要有以下几点原因：</p>

<p>1 由于我们所写出的页面是要在不同的屏幕大小设备上运行的</p>

<p>2 所以我们在写样式的时候必须要先以一个确定的屏幕来作为参考，这个就由我们拿到的视觉稿来定</p>

<p>3 假如我们拿到的视觉稿是以iphone6的屏幕为基准设计的</p>

<p>4 iPhone6的屏幕大小是375px，</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rem = window.innerWidth  / 10
</code></pre></div></div>

<p>这样计算出来的rem基准值就是37.5（iphone6的视觉稿），这里为什么要除以10呢，其实这个值是随便定义的,因为不想让html的font-size太大，当然也可以选择不除，只要在后面动态js计算时保证一样的值就可以，在这里列举一下其他手机的</p>

<p>iphone3gs: 320px / 10 = 32px</p>

<p>iphone4/5: 320px  / 10 = 32px</p>

<p>iphone6: 375px  / 10 =37.5px</p>

<p>动态设置html的font-size</p>

<p>现在关键问题来了，我们该如何通过不同的屏幕去动态设置html的font-size呢，这里一般分为两种办法</p>

<p>1 利用css的media query来设置即</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@media (min-device-width : 375px) and (max-device-width : 667px) and (-webkit-min-device-pixel-ratio : 2){
      html{font-size: 37.5px;}
}
</code></pre></div></div>

<p>2 利用javascript来动态设置 根据我们之前算出的基准值，我们可以利用js动态算出当前屏幕所适配的font-size即：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>document.getElementsByTagName('html')[0].style.fontSize = window.innerWidth / 10 + 'px';
</code></pre></div></div>

<p>然后我们看一下之前那个demo展示的效果</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.con {
      width: px2rem(200px);
      height: px2rem(200px);
      background-color: red;
}
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"con"</span><span class="nt">&gt;</span>
         
<span class="nt">&lt;/div&gt;</span>
document.addEventListener('DOMContentLoaded', function(e) {
                document.getElementsByTagName('html')[0].style.fontSize = window.innerWidth / 10 + 'px';
}, false);
</code></pre></div></div>

<p>iPhone6下，正常显示200px</p>

<p>在iphone4下，显示169px</p>

<p>由此可见我们可以通过设置不同的html基础值来达到在不同页面适配的目的，当然在使用js来设置时，<code class="highlighter-rouge">需要绑定页面的resize事件来达到变化时更新html的font-size。</code></p>

<p>rem适配进阶</p>

<p>我们知道，一般我们获取到的视觉稿大部分是iphone6的，所以我们看到的尺寸一般是双倍大小的，在使用rem之前，我们一般会自觉的将标注/2，其实这也并无道理，但是当我们配合rem使用时，完全可以按照视觉稿上的尺寸来设置。</p>

<p>1 设计给的稿子双倍的原因是iphone6这种屏幕属于高清屏，也即是设备像素比(device pixel ratio)dpr比较大，所以显示的像素较为清晰。</p>

<p>2 一般手机的dpr是1，iphone4，iphone5这种高清屏是2，iphone6s plus这种高清屏是3，可以通过js的window.devicePixelRatio获取到当前设备的dpr，所以iphone6给的视觉稿大小是（*2）750×1334了。</p>

<p>3 拿到了dpr之后，我们就可以在viewport meta头里，取消让浏览器自动缩放页面，而自己去设置viewport的content例如（这里之所以要设置viewport是因为我们要实现border1px的效果，加入我给border设置了1px，在scale的影响下，高清屏中就会显示成0.5px的效果）</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>meta.setAttribute('content', 'initial-scale=' + 1/dpr + ', maximum-scale=' + 1/dpr + ', minimum-scale=' + 1/dpr + ', user-scalable=no');
</code></pre></div></div>

<p>4 设置完之后配合rem，修改</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@function px2rem($px){
    $rem : 75px;
    @return ($px/$rem) + rem;
}
</code></pre></div></div>

<p>双倍75，这样就可以完全按照视觉稿上的尺寸来了。不用在/2了，这样做的好处是：</p>

<p>1 解决了图片高清问题。</p>

<p>2 解决了border 1px问题（我们设置的1px，在iphone上，由于viewport的scale是0.5，所以就自然缩放成0.5px）</p>

<p>在iphone6下的例子：</p>

<p>我们使用动态设置viewport，在iphone6下，scale会被设置成1/2即0.5，其他手机是1/1即1.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>meta.setAttribute('content', 'initial-scale=' + 1/dpr + ', maximum-scale=' + 1/dpr + ', minimum-scale=' + 1/dpr + ', user-scalable=no');
</code></pre></div></div>

<p>我们的css代码，注意这里设置了1px的边框</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
.con {
            margin-top: 200px;
            width: 5.3rem;
            height: 5.3rem;
            border-top:1px solid #000;
 }
</code></pre></div></div>

<p>但是rem也并不是万能的，下面也有一些场景是不适于使用rem的</p>

<p>1 当用作图片或者一些不能缩放的展示时，必须要使用固定的px值，因为缩放可能会导致图片压缩变形等。</p>

<p>在列举几个使用rem的线上网站：</p>

<p>网易新闻：http://3g.163.com/touch/news/subchannel/all?version=v_standard</p>

<p>聚划算：https://jhs.m.taobao.com/m/index.htm#!all</p>

<p>参考资料：http://www.nihaoshijie.com.cn/index.php/archives/593</p>

            </article>
        </div>
        <hr/>
        <!--<blockquote style="margin-top: 20px"><p>对于本文内容有问题或建议的小伙伴，欢迎在文章底部留言交流讨论。</p></blockquote>-->
        <div class="text-center donate-btn">
          <a href="/donate/"><button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-usd" aria-hidden="true"></span> 您的支持是将是我写作最大的动力!</button></a>
        </div>
      </div>
    </div>
  </div>
</div>

    <footer class="footer" role="contentinfo">
	<div class="container">
		<div class="footer-links">
			<span>
				我的网站展示：
			</span>
			<span>
				<a href="http://www.thisisme1228.com/">百家书（电脑上看）</a>
			</span>
			<span>&nbsp;|&nbsp;</span>
			<span>
				<a href="http://music.thisisme1228.com/index.html#/recommend">音乐网(手机上看)</a>
			</span>
		</div>
		<div class="copyright-dis">Copyright © 2017 <a href="JavaScript:;">Helene</a> . All rights reserved.</div>
		<p class="copyright">备案证书号：辽ICP备17012545号-1</p>
	</div>
	<ul id="backToTop" class="back-to-top">
		<li>
			<span>TOP</span>
		</li>
	</ul>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/lessismore.js"></script>
<script src="/styles/js/application.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="/styles/js/main.js"></script>


  </body>
</html>
