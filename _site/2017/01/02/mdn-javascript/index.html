<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Web 技术文档 JavaScript</title>
	<link rel="shortcut icon" href="/styles/images/favicon.png">
	<link rel="icon" href="/styles/images/favicon.png">

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/styles/css/syntax.css">
	<link rel="stylesheet" href="/styles/css/main.css">
	<link rel="canonical" href="/2017/01/02/mdn-javascript/">
	<link rel="alternate" type="application/rss+xml" title="Helene's blog" href="/feed.xml">
	
	<!--<meta name="keywords" content="Web 技术文档 JavaScript, Helene's blog, 厚积薄发">-->
	<!--<meta name="description" content="厚积薄发">-->

	<script src="/styles/js/jquery.min.js"></script>
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
  	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>
  <body class="index">
    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <span>
          HELENE
        </span>
      </a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <!--<li>
          <a href="/">首页</a>
        </li>-->
      </ul>
      <ul class="nav navbar-nav navbar-right"  style="margin-top: 1rem">
        <li>
          <a href="/greens/">life</a>
        </li>
        <li>
          <a href="/rice">work</a>
        </li>
        <!--<li>
            <a><span id="busuanzi_container_site_pv">客流量<span id="busuanzi_value_site_pv"></span>次</span></a>
        </li>-->
        <li>
          <a href="/reference">References</a>
        </li>
        <!--<li>
          <a href="/donate/">打赏我</a>
        </li>-->
        <!--<li>
          <a href="http://resume.thisisme1228.com/index.html">我的简历</a>
        </li>-->
        <!--<li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于我<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a rel="nofollow" target="_blank" href="https://github.com/Thisisme1228">Github</a></li>
            <li><a rel="nofollow" target="_blank" href="">关于作者</a></li>
            <li><a rel="nofollow" href="/books">我的书单</a></li>
            <li><a rel="nofollow" href="http://www.hifreud.com/domains/">域名管理</a></li>
            <li><a rel="nofollow" href="/reference">推荐博客</a></li>
            <li><a href="/feed.xml">RSS订阅</a></li>
            <li class="divider"></li>
            <li><a rel="nofollow" target="_blank" href="https://github.com/luoyan35714/LessOrMore.git">本项目</a></li>
          </ul>
        </li>-->
      </ul>
    </nav>
  </div>
</header>
    <div class="docs-header hidden" id="content">
    <canvas id="mycanvas">你的浏览器不支持canvas</canvas>
    <div class="container">
  	
      <h1 class="margin-top-45">Better me</h1>
    
  </div>
    <audio  class="hidden" controls  loop="loop"  id="h5audio_media"  preload="auto" height="0" width="0" src="/styles/music/I-will-love-you.mp3">
        <source src="/styles/music/I-will-love-you.mp3">
    </audio>
    <div class="audio-img" id="radio">
        <img  src="/styles/images/header/radio.png">
        <!--<span style="color: beige" id="clickMe">Click!</span>-->
    </div>
</div>

    
    <!-- 内页-->
<div class="container docs-container">
  <div class="row">
    <div class="col-md-3 fix-menu hidden-sm hidden-xs">
          <ul>
              <!-- 供内页使用 -->
<div id="navigation">
<!--  <h1>目录</h1>-->
  <ul class="nav sidenav">
  </ul>
</div>




          </ul>
    </div>
    <div class="col-md-8 col-md-push-3" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">Web 技术文档 JavaScript</h1>
                <span class="post-meta">Date：Jan 2, 2017</span>
                <span class="meta">Author：<a target="_blank" href="http://localhost:4000">Helene</a></span>
              <br />
              <blockquote><p>本文章采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh"> 知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议 </a>进行许可。转载请注明来自<a href="http://life.thisisme1228.com/">Helene的博客</a></p></blockquote>
            </header>
            <article class="post-content">
              <ul id="markdown-toc">
  <li><a href="#javascript-指南" id="markdown-toc-javascript-指南">JavaScript 指南</a>    <ul>
      <li><a href="#语法和数据类型" id="markdown-toc-语法和数据类型">语法和数据类型</a></li>
      <li><a href="#流程控制与错误处理" id="markdown-toc-流程控制与错误处理">流程控制与错误处理</a></li>
      <li><a href="#函数" id="markdown-toc-函数">函数</a></li>
      <li><a href="#表达式和运算符" id="markdown-toc-表达式和运算符">表达式和运算符</a></li>
    </ul>
  </li>
</ul>
<!-- more -->

<h3 id="javascript-指南">JavaScript 指南</h3>

<h4 id="语法和数据类型">语法和数据类型</h4>

<p><strong>变量的作用域</strong></p>

<p>ECMAScript 6 之前的JavaScript没有 语句块 作用域；相反，语句块中声明的变量将成为语句块所在代码段的局部变量。例如，如下的代码将在控制台输出 5，因为 x 的作用域是声明了 x 的那个函数（或全局范围），而不是 if 语句块。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// 5</span>
</code></pre></div></div>

<p>如果使用 ECMAScript 6 中的 let 声明，上述行为将发生变化。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span> <span class="c1">// ReferenceError: y is not defined</span>
</code></pre></div></div>

<p><strong>变量声明提升</strong></p>

<p>在 ECMAScript 2015 中，let（const）将不会提升变量到代码块的顶部。因此，在变量声明之前引用这个变量，将抛出错误ReferenceError。这个变量将从代码块一开始的时候就处在一个“暂时性死区”，直到这个变量被声明为止。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// ReferenceError</span>
<span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>函数提升</strong></p>

<p>对于函数，只有函数声明会被提升到顶部，而不包括函数表达式。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* 函数声明 */</span>

<span class="nx">foo</span><span class="p">();</span> <span class="c1">// "bar"</span>

<span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">);</span>
<span class="p">}</span>


<span class="cm">/* 函数表达式   表达式定义的函数，称为匿名函数。匿名函数没有函数提升。*/</span>

<span class="nx">baz</span><span class="p">();</span> <span class="c1">// TypeError: baz is not a function</span>
<span class="c1">//此时的"baz"相当于一个声明的变量，类型为undefined。</span>
<span class="err">由于</span><span class="nx">baz</span><span class="err">只是相当于一个变量，因此浏览器认为</span><span class="s2">"baz()"</span><span class="err">不是一个函数。</span>
<span class="kd">var</span> <span class="nx">baz</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"bar2"</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p><strong>常量(Constants)</strong></p>

<p>你可以用关键字 const 创建一个只读(read-only)的常量。常量标识符的命名规则和变量相同：必须以字母、下划线或美元符号开头并可以包含有字母、数字或下划线。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="s1">'212'</span><span class="p">;</span>
</code></pre></div></div>

<p>常量不可以通过赋值改变其值，也不可以在脚本运行时重新声明。它必须被初始化为某个值。</p>

<p>常量的作用域规则与 let 块级作用域变量相同。若省略const关键字，则该标识符将被视为变量。</p>

<p>在同一作用域中，不能使用与变量名或函数名相同的名字来命名常量。例如：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// THIS WILL CAUSE AN ERROR</span>
<span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{};</span>
<span class="kd">const</span> <span class="nx">f</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="c1">// THIS WILL CAUSE AN ERROR ALSO</span>
<span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">g</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">g</span><span class="p">;</span>

  <span class="c1">//statements</span>
<span class="p">}</span>
</code></pre></div></div>

<p>然而,对象属性是不受保护的,所以可以使用如下语句来执行。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">MY_OBJECT</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"key"</span><span class="p">:</span> <span class="s2">"value"</span><span class="p">};</span>
<span class="nx">MY_OBJECT</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="s2">"otherValue"</span><span class="p">;</span>
</code></pre></div></div>

<p>数据类型的转换</p>

<p>JavaScript是一种动态类型语言(dynamically typed language)。这意味着你声明变量时可以不必指定数据类型，而数据类型会在脚本执行时根据需要自动转换。</p>

<p>在涉及其它运算符（译注：如下面的减号’-‘）时，JavaScript语言不会把数字变为字符串。例如（译注：第一例是数学运算，第二例是字符串运算）：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"37"</span> <span class="o">-</span> <span class="mi">7</span> <span class="c1">// 30</span>
<span class="s2">"37"</span> <span class="o">+</span> <span class="mi">7</span> <span class="c1">// "377"</span>
</code></pre></div></div>

<p><strong>字符串转换为数字</strong></p>

<p>parseInt()和parseFloat()</p>

<p>单目加法运算符</p>

<p>将字符串转换为数字的另一种方法是使用单目加法运算符。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"1.1"</span> <span class="o">+</span> <span class="s2">"1.1"</span> <span class="o">=</span> <span class="s2">"1.11.1"</span>
<span class="p">(</span><span class="o">+</span><span class="s2">"1.1"</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="o">+</span><span class="s2">"1.1"</span><span class="p">)</span> <span class="o">=</span> <span class="mf">2.2</span>   <span class="c1">// 注：加入括号为清楚起见，不是必需的。</span>
</code></pre></div></div>

<p><strong>字面量</strong></p>

<p>1、数组字面量</p>

<p>数组字面值是一个封闭在方括号对([])中的包含有零个或多个表达式的列表，其中每个表达式代表数组的一个元素。当你使用数组字面值创建一个数组时，该数组将会以指定的值作为其元素进行初始化，而其长度被设定为元素的个数。</p>

<p>下面的示例用3个元素生成数组coffees，它的长度是3。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">coffees</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"French Roast"</span><span class="p">,</span> <span class="s2">"Colombian"</span><span class="p">,</span> <span class="s2">"Kona"</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// 1</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="c1">// 3</span>
</code></pre></div></div>

<p>数组字面值中的多余逗号</p>

<p>你不必列举数组字面值中的所有元素。若你在同一行中连写两个逗号（,），数组中就会产生一个没有被指定的元素，其初始值是undefined。以下示例创建了一个名为fish的数组：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">fish</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Lion"</span><span class="p">,</span> <span class="p">,</span> <span class="s2">"Angel"</span><span class="p">];</span>
</code></pre></div></div>

<p>在这个数组中，有两个已被赋值的元素，和一个空元素（fish[0]是”Lion”，fish[1]是undefined，而fish[2]是”Angel”；译注：此时数组的长度属性fish.length是3)。</p>

<p>如果你在元素列表的尾部添加了一个逗号，它将会被忽略。在下面的例子中，数组的长度是3，并不存在myList[3]这个元素.元素列表中其它所有的逗号都表示一个新元素（的开始）。</p>

<blockquote>
  <p>注意：尾部的逗号在早期版本的浏览器中会产生错误，因而编程时的最佳实践方式就是移除它们。</p>
</blockquote>

<p>(译注：而“现代”的浏览器似乎鼓励这种方式，因为好多网页中都这么写？)</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">myList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'home'</span><span class="p">,</span> <span class="p">,</span> <span class="s1">'school'</span><span class="p">,</span> <span class="p">];</span>
</code></pre></div></div>

<p>在下面的例子中，数组的长度是4，元素myList[0]和myList[2]缺失（译注：没被赋值，因而是undefined）。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">myList</span> <span class="o">=</span> <span class="p">[</span> <span class="p">,</span> <span class="s1">'home'</span><span class="p">,</span> <span class="p">,</span> <span class="s1">'school'</span><span class="p">];</span>
</code></pre></div></div>

<p>再看一个例子。在这里，该数组的长度是4，元素myList[1]和myList[3]被漏掉了。（但是）只有最后的那个逗号被忽略。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">myList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'home'</span><span class="p">,</span> <span class="p">,</span> <span class="s1">'school'</span><span class="p">,</span> <span class="p">,</span> <span class="p">];</span>
</code></pre></div></div>

<p>理解多余的逗号（在脚本运行时会被如何处理）的含义，对于从语言层面理解JavaScript是十分重要的。但是，在你自己写代码时：<code class="highlighter-rouge">显式地将缺失的元素声明为undefined，将大大提高你的代码的清晰度和可维护性</code>。</p>

<p><strong>对象字面量</strong></p>

<p>对象属性名字可以是任意字符串，包括空串。如果对象属性名字不是合法的javascript标识符，它必须用”“包裹。属性的名字不合法，那么便不能用.访问属性值，而是通过类数组标记(“[]”)访问和赋值。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">unusualPropertyNames</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">""</span><span class="p">:</span> <span class="s2">"An empty string"</span><span class="p">,</span>
  <span class="s2">"!"</span><span class="p">:</span> <span class="s2">"Bang!"</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">unusualPropertyNames</span><span class="p">.</span><span class="s2">""</span><span class="p">);</span>   <span class="c1">// 语法错误: Unexpected string</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">unusualPropertyNames</span><span class="p">[</span><span class="s2">""</span><span class="p">]);</span>  <span class="c1">// An empty string</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">unusualPropertyNames</span><span class="p">.</span><span class="o">!</span><span class="p">);</span>    <span class="c1">// 语法错误: Unexpected token !</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">unusualPropertyNames</span><span class="p">[</span><span class="s2">"!"</span><span class="p">]);</span> <span class="c1">// Bang!</span>
</code></pre></div></div>

<h4 id="流程控制与错误处理">流程控制与错误处理</h4>

<p><strong>if…else 语句</strong></p>

<p>不建议在条件表达式中使用赋值操作，因为在快速查阅代码时容易看成等值比较。不要使用下面的代码：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/* do the right thing */</span>
<span class="p">}</span>
</code></pre></div></div>

<p>如果你需要在条件表达式中使用赋值，通常在赋值语句前后额外添加一对括号。例如：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">((</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">y</span><span class="p">))</span> <span class="p">{</span>
  <span class="cm">/* do the right thing */</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>中断语句</strong></p>

<p>使用中断语句终止循环、开关或与标签语句连接。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>当你使用没有带标签语句的中断语句（break）时，while，do-while，for或者switch封闭的内部语句将立即终止，并转移到后面的语句执行。

当你使用带有标签语句的中断语句（break）时，将终止在特定的标签语句。
</code></pre></div></div>

<p>中断语句的语法如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1、break;

2、break label;
</code></pre></div></div>

<p>第一种语法形式用于终止在循环体或者switch的封闭内部；第二种语法形式用于在特定的封闭标签语句。</p>

<h4 id="函数">函数</h4>

<p><strong>多层嵌套函数</strong></p>

<p>函数可以被多层嵌套。例如，函数A可以包含函数B，函数B可以再包含函数C。B和C都形成了闭包，所以B可以访问A，C可以访问B和A。因此，闭包可以包含多个作用域；他们递归式的包含了所有包含它的函数作用域。这个称之为作用域链。（稍后会详细解释）</p>

<p>思考一下下面的例子：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">A</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">B</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">C</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">C</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">B</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">A</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// logs 6 (1 + 2 + 3)</span>
</code></pre></div></div>

<p>在这个例子里面，C可以访问B的y和A的x。这是因为：</p>

<p>B形成了一个包含A的闭包，B可以访问A的参数和变量</p>

<p>C形成了一个包含B的闭包</p>

<p>B包含A，所以C也包含A，C可以访问B和A的参数和变量。换言之，C用这个顺序链接了B和A的作用域</p>

<p>反过来却不是这样。A不能访问C，因为A看不到B中的参数和变量，C是B中的一个变量，所以C是B私有的。</p>

<p><strong>命名冲突</strong></p>

<p>当同一个闭包作用域下两个参数或者变量同名时，就会产生命名冲突。更近的作用域有更高的优先权，所以最近的优先级最高，最远的优先级最低。这就是作用域链。链的第一个元素就是最里面的作用域，最后一个元素便是最外层的作用域。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">outside</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">inside</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">inside</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">outside</span><span class="p">()(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// returns 20 instead of 10</span>
</code></pre></div></div>

<p>命名冲突发生在return x上，inside的参数x和outside变量x发生了冲突。这里的作用链域是{inside, outside, 全局对象}。因此inside的x具有最高优先权，返回了20（inside的x）而不是10（outside的x）。</p>

<p><strong>使用 arguments 对象</strong></p>

<p>函数的实际参数会被保存在一个类似数组的arguments对象中。在函数内，你可以按如下方式找出传入的引数：</p>

<p>arguments[i]</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">myConcat</span><span class="p">(</span><span class="nx">separator</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="c1">// initialize list</span>
       <span class="nx">i</span><span class="p">;</span>
   <span class="c1">// iterate through arguments</span>
   <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="kr">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">+=</span> <span class="kr">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">separator</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// returns "red, orange, blue, "</span>
<span class="nx">myConcat</span><span class="p">(</span><span class="s2">", "</span><span class="p">,</span> <span class="s2">"red"</span><span class="p">,</span> <span class="s2">"orange"</span><span class="p">,</span> <span class="s2">"blue"</span><span class="p">);</span>

<span class="c1">// returns "elephant; giraffe; lion; cheetah; "</span>
<span class="nx">myConcat</span><span class="p">(</span><span class="s2">"; "</span><span class="p">,</span> <span class="s2">"elephant"</span><span class="p">,</span> <span class="s2">"giraffe"</span><span class="p">,</span> <span class="s2">"lion"</span><span class="p">,</span> <span class="s2">"cheetah"</span><span class="p">);</span>

<span class="c1">// returns "sage. basil. oregano. pepper. parsley. "</span>
<span class="nx">myConcat</span><span class="p">(</span><span class="s2">". "</span><span class="p">,</span> <span class="s2">"sage"</span><span class="p">,</span> <span class="s2">"basil"</span><span class="p">,</span> <span class="s2">"oregano"</span><span class="p">,</span> <span class="s2">"pepper"</span><span class="p">,</span> <span class="s2">"parsley"</span><span class="p">);</span>
</code></pre></div></div>

<blockquote>
  <p>提示：arguments变量只是 ”类数组对象“，并不是一个数组。称其为类数组对象是说它有一个索引编号和length属性。尽管如此，它并不拥有全部的Array对象的操作方法。</p>
</blockquote>

<p><strong>箭头函数</strong></p>

<p>箭头函数表达式（也称胖箭头函数）相比函数表达式具有较短的语法并以词法的方式绑定 this。箭头函数总是匿名的。另见 hacks.mozilla.org 的博文：“深度了解ES6：箭头函数”。</p>

<p>有两个因素会影响引入箭头函数：更简洁的函数和 this。</p>

<p>（一）更简洁的函数</p>

<p>有一些函数模式，更简洁的函数很受欢迎。对比一下：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s2">"Hydrogen"</span><span class="p">,</span>
  <span class="s2">"Helium"</span><span class="p">,</span>
  <span class="s2">"Lithium"</span><span class="p">,</span>
  <span class="s2">"Beryllium"</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">a2</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span> <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="p">});</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a2</span><span class="p">);</span> <span class="c1">// logs [ 8, 6, 7, 9 ]</span>

<span class="kd">var</span> <span class="nx">a3</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">s</span> <span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a3</span><span class="p">);</span> <span class="c1">// logs [ 8, 6, 7, 9 ]</span>
</code></pre></div></div>

<p>(二)this 的词法</p>

<p>在箭头函数出现之前，每一个新函数都重新定义了自己的 this 值（在严格模式下，一个新的对象在构造函数里是未定义的，以“对象方法”的方式调用的函数是上下文对象等）。以面向对象的编程风格，这样着实有点恼人。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Person</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// The Person() constructor defines `this` as itself.</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="nx">growUp</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// In nonstrict mode, the growUp() function defines `this` </span>
    <span class="c1">// as the global object, which is different from the `this`</span>
    <span class="c1">// defined by the Person() constructor.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="o">++</span><span class="p">;</span><span class="c1">//this是window</span>
  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>
</code></pre></div></div>

<p>在ECMAScript 3/5里，通过把this的值赋值给一个变量可以修复这个问题。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Person</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span> <span class="c1">// Some choose `that` instead of `self`. </span>
                   <span class="c1">// Choose one and be consistent.</span>
  <span class="nb">self</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="nx">growUp</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// The callback refers to the `self` variable of which</span>
    <span class="c1">// the value is the expected object.</span>
    <span class="nb">self</span><span class="p">.</span><span class="nx">age</span><span class="o">++</span><span class="p">;</span><span class="c1">//this是window，self指向上级函数中的this</span>
  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>另外，创建一个约束函数可以使得 this值被正确传递给 growUp() 函数。</p>

<p>箭头功能捕捉闭包上下文的this值，所以下面的代码工作正常。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Person</span><span class="p">(){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="o">++</span><span class="p">;</span> <span class="c1">// |this| properly refers to the person object</span>
  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>
</code></pre></div></div>

<h4 id="表达式和运算符">表达式和运算符</h4>


            </article>
        </div>
        <!--<hr/>-->
        <!--<blockquote style="margin-top: 20px"><p>对于本文内容有问题或建议的小伙伴，欢迎在文章底部留言交流讨论。</p></blockquote>-->
        <!--<div class="text-center donate-btn">
          <a href="/donate/"><button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-usd" aria-hidden="true"></span> 您的支持是将是我写作最大的动力!</button></a>
        </div>-->
      </div>
    </div>
  </div>
</div>

<style>
  .docs-content {
    margin-top:80px;
  }
  h1, h2, h3 {
    margin: 3rem 0;
    font-size: 24px;
  }
  #navigation h1 {
    margin: 1rem 0;
  }
  #navigation .sidenav {
    background-color: transparent;
  }
  .docs-content {
    margin-bottom: 100px;
  }
</style>

    <footer class="footer" role="contentinfo">
	<div class="container">
		<div class="footer-links">
			<span class="copyright">
				My Site:
			</span>
			<span>
				<a  href="http://www.thisisme1228.com/" class="font-color-sienna">百家书(请在电脑上浏览)</a>
			</span>
			<span>&nbsp;&nbsp;</span>
			<span>
				<a href="http://music.thisisme1228.com/index.html#/recommend" class="font-color-sienna">音乐网(请在手机上浏览)</a>
			</span>
		</div>
		<div class="copyright-dis">Copyright © 2017 <a href="http://life.thisisme1228.com" class="">Helene</a> . All rights reserved.</div>
		<p class="copyright">辽ICP备17012545号-1</p>
	</div>
</footer>
<ul id="backToTop" class="back-to-top">
	<li>
		<span>TOP</span>
	</li>
</ul>
<!--<ul id="lastPage" class="last-page">
	<li onClick="javascript :history.back(-1);"">
		<span>BACK</span>
	</li>
</ul>-->

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/lessismore.js"></script>
<script src="/styles/js/application.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="/styles/js/function.min.js"></script>
<script src="/styles/js/main.js"></script>


  </body>
</html>
